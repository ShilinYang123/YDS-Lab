# æ™ºèƒ½ç›‘æ§ç³»ç»Ÿæ•…éšœæ’é™¤æŒ‡å—

## ğŸš¨ å¸¸è§é—®é¢˜è¯Šæ–­

### 1. ç³»ç»Ÿå¯åŠ¨é—®é¢˜

#### é—®é¢˜: æ™ºèƒ½ç›‘æ§ç³»ç»Ÿæ— æ³•å¯åŠ¨
**ç—‡çŠ¶**: è¿è¡Œ `python tools/start.py --work` åæ²¡æœ‰çœ‹åˆ°æ™ºèƒ½ç›‘æ§å¯åŠ¨ä¿¡æ¯

**å¯èƒ½åŸå› **:
- Pythonç‰ˆæœ¬ä¸å…¼å®¹
- é…ç½®æ–‡ä»¶æŸå
- ä¾èµ–åº“ç¼ºå¤±
- æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # éœ€è¦3.8+

# 2. æ£€æŸ¥é…ç½®æ–‡ä»¶
python -c "import json; json.load(open('tools/LongMemory/intelligent_monitor_config.json'))"

# 3. é‡æ–°å®‰è£…
python scripts/install.py

# 4. æ£€æŸ¥æƒé™
ls -la tools/LongMemory/
```

#### é—®é¢˜: å¯åŠ¨æ—¶å‡ºç°å¯¼å…¥é”™è¯¯
**ç—‡çŠ¶**: `ImportError` æˆ– `ModuleNotFoundError`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§
ls tools/LongMemory/
# åº”è¯¥åŒ…å«: intelligent_monitor.py, smart_error_detector.py, proactive_reminder.py

# é‡æ–°å¤åˆ¶æ–‡ä»¶
cp -r src/tools/LongMemory/* tools/LongMemory/
```

### 2. æ€§èƒ½é—®é¢˜

#### é—®é¢˜: ç³»ç»Ÿå“åº”ç¼“æ…¢
**ç—‡çŠ¶**: ä»£ç ç¼–è¾‘æ—¶å‡ºç°æ˜æ˜¾å»¶è¿Ÿ

**è§£å†³æ–¹æ¡ˆ**:
```json
// è°ƒæ•´ smart_detector_config.json
{
  "scan_interval": 60,        // å¢åŠ æ‰«æé—´éš”
  "severity_threshold": "high" // æé«˜é˜ˆå€¼
}
```

#### é—®é¢˜: å†…å­˜å ç”¨è¿‡é«˜
**ç—‡çŠ¶**: ç³»ç»Ÿå†…å­˜ä½¿ç”¨ç‡æŒç»­ä¸Šå‡

**è§£å†³æ–¹æ¡ˆ**:
```bash
# 1. é‡å¯ç›‘æ§ç³»ç»Ÿ
python tools/start.py --restart

# 2. æ¸…ç†å­¦ä¹ æ•°æ®
rm tools/LongMemory/learning_data.json

# 3. è°ƒæ•´é…ç½®
# ç¼–è¾‘ intelligent_monitor_config.json
{
  "learning_enabled": false  // ä¸´æ—¶ç¦ç”¨å­¦ä¹ åŠŸèƒ½
}
```

### 3. åŠŸèƒ½å¼‚å¸¸

#### é—®é¢˜: é”™è¯¯æ£€æµ‹ä¸å·¥ä½œ
**ç—‡çŠ¶**: æ˜æ˜¾çš„é”™è¯¯æ²¡æœ‰è¢«æ£€æµ‹åˆ°

**è¯Šæ–­æ­¥éª¤**:
```bash
# 1. è¿è¡Œæµ‹è¯•
python tools/LongMemory/test_intelligent_monitor.py

# 2. æ£€æŸ¥é…ç½®
cat tools/LongMemory/smart_detector_config.json

# 3. æŸ¥çœ‹æ—¥å¿—
tail -f logs/system.log
```

**è§£å†³æ–¹æ¡ˆ**:
```json
// ç¡®ä¿é…ç½®æ­£ç¡®
{
  "enabled": true,
  "scan_interval": 30,
  "severity_threshold": "low"  // é™ä½é˜ˆå€¼
}
```

#### é—®é¢˜: æé†’ç³»ç»Ÿè¿‡äºé¢‘ç¹
**ç—‡çŠ¶**: æ”¶åˆ°è¿‡å¤šæé†’ä¿¡æ¯

**è§£å†³æ–¹æ¡ˆ**:
```json
// è°ƒæ•´ reminder_config.json
{
  "reminder_interval": 300,      // å¢åŠ æé†’é—´éš”
  "max_reminders_per_session": 5 // å‡å°‘æœ€å¤§æé†’æ•°
}
```

### 4. é…ç½®é—®é¢˜

#### é—®é¢˜: é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯
**ç—‡çŠ¶**: JSONè§£æé”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# éªŒè¯JSONæ ¼å¼
python -m json.tool tools/LongMemory/intelligent_monitor_config.json

# æ¢å¤é»˜è®¤é…ç½®
cp src/tools/LongMemory/intelligent_monitor_config.json tools/LongMemory/
```

#### é—®é¢˜: å­¦ä¹ æ•°æ®æŸå
**ç—‡çŠ¶**: å­¦ä¹ å¼•æ“å¼‚å¸¸

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…é™¤å­¦ä¹ æ•°æ®
rm tools/LongMemory/learning_data.json
rm tools/LongMemory/success_patterns.json
rm tools/LongMemory/failure_patterns.json

# é‡å¯ç³»ç»Ÿ
python tools/start.py --work
```

## ğŸ”§ è¯Šæ–­å·¥å…·

### ç³»ç»Ÿå¥åº·æ£€æŸ¥
åˆ›å»ºè¯Šæ–­è„šæœ¬ `diagnose.py`:

```python
#!/usr/bin/env python3
import json
import os
from pathlib import Path

def diagnose_system():
    print("ğŸ” æ™ºèƒ½ç›‘æ§ç³»ç»Ÿè¯Šæ–­")
    print("=" * 40)
    
    # æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§
    required_files = [
        "tools/start.py",
        "tools/LongMemory/intelligent_monitor.py",
        "tools/LongMemory/smart_error_detector.py",
        "tools/LongMemory/proactive_reminder.py",
        "tools/LongMemory/intelligent_monitor_config.json"
    ]
    
    print("ğŸ“ æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥:")
    for file_path in required_files:
        if Path(file_path).exists():
            print(f"âœ“ {file_path}")
        else:
            print(f"âœ— {file_path} - ç¼ºå¤±!")
    
    # æ£€æŸ¥é…ç½®æ–‡ä»¶
    print("\nâš™ï¸ é…ç½®æ–‡ä»¶æ£€æŸ¥:")
    config_files = [
        "tools/LongMemory/intelligent_monitor_config.json",
        "tools/LongMemory/smart_detector_config.json",
        "tools/LongMemory/reminder_config.json"
    ]
    
    for config_file in config_files:
        try:
            with open(config_file, 'r', encoding='utf-8') as f:
                json.load(f)
            print(f"âœ“ {config_file}")
        except Exception as e:
            print(f"âœ— {config_file} - é”™è¯¯: {e}")
    
    # æ£€æŸ¥æƒé™
    print("\nğŸ”’ æƒé™æ£€æŸ¥:")
    test_dirs = ["tools/LongMemory", "logs"]
    for test_dir in test_dirs:
        if os.access(test_dir, os.R_OK | os.W_OK):
            print(f"âœ“ {test_dir} - å¯è¯»å†™")
        else:
            print(f"âœ— {test_dir} - æƒé™ä¸è¶³")

if __name__ == "__main__":
    diagnose_system()
```

### æ—¥å¿—åˆ†æå·¥å…·
```bash
# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
grep -i "error" logs/system.log | tail -10

# æŸ¥çœ‹ç›‘æ§çŠ¶æ€
grep -i "monitoring" logs/system.log | tail -5

# åˆ†ææ€§èƒ½
grep -i "performance" logs/system.log
```

## ğŸ”„ æ¢å¤æ“ä½œ

### å®Œå…¨é‡ç½®
å¦‚æœç³»ç»Ÿå‡ºç°ä¸¥é‡é—®é¢˜ï¼Œå¯ä»¥å®Œå…¨é‡ç½®:

```bash
# 1. åœæ­¢æ‰€æœ‰ç›¸å…³è¿›ç¨‹
pkill -f intelligent_monitor

# 2. å¤‡ä»½å½“å‰çŠ¶æ€
cp -r tools/LongMemory tools/LongMemory.backup

# 3. æ¢å¤åŸå§‹æ–‡ä»¶
rm -rf tools/LongMemory
cp -r src/tools/LongMemory tools/

# 4. é‡æ–°å¯åŠ¨
python tools/start.py --work
```

### ä»å¤‡ä»½æ¢å¤
```bash
# æŸ¥æ‰¾å¤‡ä»½
ls backup_*

# æ¢å¤ç‰¹å®šæ–‡ä»¶
cp backup_æ™ºèƒ½ç›‘æ§ç³»ç»Ÿ_*/start.py tools/start.py
cp -r backup_æ™ºèƒ½ç›‘æ§ç³»ç»Ÿ_*/LongMemory/* tools/LongMemory/
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### ç›‘æ§è„šæœ¬
åˆ›å»ºæ€§èƒ½ç›‘æ§è„šæœ¬:

```python
#!/usr/bin/env python3
import psutil
import time

def monitor_performance():
    while True:
        # æŸ¥æ‰¾æ™ºèƒ½ç›‘æ§è¿›ç¨‹
        for proc in psutil.process_iter(['pid', 'name', 'cmdline']):
            try:
                if 'intelligent_monitor' in ' '.join(proc.info['cmdline']):
                    cpu_percent = proc.cpu_percent()
                    memory_mb = proc.memory_info().rss / 1024 / 1024
                    print(f"PID: {proc.info['pid']}, CPU: {cpu_percent}%, Memory: {memory_mb:.1f}MB")
            except:
                pass
        
        time.sleep(10)

if __name__ == "__main__":
    monitor_performance()
```

## ğŸ†˜ ç´§æ€¥å¤„ç†

### ç³»ç»Ÿæ— å“åº”
```bash
# å¼ºåˆ¶ç»ˆæ­¢æ‰€æœ‰ç›¸å…³è¿›ç¨‹
pkill -9 -f intelligent_monitor
pkill -9 -f smart_error_detector
pkill -9 -f proactive_reminder

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
rm -f /tmp/intelligent_monitor_*
rm -f tools/LongMemory/*.lock

# é‡å¯ç³»ç»Ÿ
python tools/start.py --work
```

### æ•°æ®æŸå
```bash
# å¤‡ä»½æŸåçš„æ•°æ®
mv tools/LongMemory/learning_data.json tools/LongMemory/learning_data.json.corrupted

# é‡ç½®å­¦ä¹ æ•°æ®
python -c "
import json
with open('tools/LongMemory/learning_data.json', 'w') as f:
    json.dump({'success_patterns': [], 'failure_patterns': []}, f)
"
```

## ğŸ“ è·å–æ”¯æŒ

### æ”¶é›†è¯Šæ–­ä¿¡æ¯
åœ¨è”ç³»æŠ€æœ¯æ”¯æŒå‰ï¼Œè¯·æ”¶é›†ä»¥ä¸‹ä¿¡æ¯:

```bash
# åˆ›å»ºè¯Šæ–­æŠ¥å‘Š
echo "=== ç³»ç»Ÿä¿¡æ¯ ===" > diagnostic_report.txt
python --version >> diagnostic_report.txt
uname -a >> diagnostic_report.txt

echo -e "\n=== æ–‡ä»¶çŠ¶æ€ ===" >> diagnostic_report.txt
ls -la tools/LongMemory/ >> diagnostic_report.txt

echo -e "\n=== é…ç½®æ–‡ä»¶ ===" >> diagnostic_report.txt
cat tools/LongMemory/intelligent_monitor_config.json >> diagnostic_report.txt

echo -e "\n=== æœ€è¿‘æ—¥å¿— ===" >> diagnostic_report.txt
tail -50 logs/system.log >> diagnostic_report.txt

echo -e "\n=== è¿›ç¨‹çŠ¶æ€ ===" >> diagnostic_report.txt
ps aux | grep -i intelligent >> diagnostic_report.txt
```

### è”ç³»æ–¹å¼
- æŠ€æœ¯æ”¯æŒé‚®ç®±: support@3ai.studio
- é—®é¢˜åé¦ˆ: issues@3ai.studio
- ç´§æ€¥è”ç³»: emergency@3ai.studio

---
**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-11-03