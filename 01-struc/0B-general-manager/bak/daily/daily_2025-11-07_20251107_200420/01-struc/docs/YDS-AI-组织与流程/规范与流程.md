# YDS-Lab AI协作系统规范与流程

**版本**: v2.1  
**更新时间**: 2025年11月2日  
**基于文档**: YDS-Lab标准目录结构（顶层设计）.md

本文档基于《YDS-Lab标准目录结构（顶层设计）.md》制定，旨在明确YDS-Lab AI协作系统开发过程中的各项标准与流程，确保AI Agent与Trae IDE集成开发工作有序、高效进行，实现"一个人+一群AI"的高效协作模式。

## 项目概述

YDS-Lab是一个基于AI原生分布式协作架构的智能开发平台，通过Trae IDE集成多智能体系统，结合标准化的目录结构和自动化工具链，实现项目从开发到交付的全生命周期管理。系统以AI协作和项目管理为核心，提供高效、智能的开发解决方案。

### 项目存储位置（YDS-Lab标准架构）
- **项目根目录**：S:\YDS-Lab
- **核心工作代码位置**：S:\YDS-Lab\projects（项目开发工作区）
- **工具脚本位置**：S:\YDS-Lab\tools（自动化工具集）
- **组织架构位置**：S:\YDS-Lab\Struc（公司组织架构与AI协作环境）
- **客户交付位置**：S:\YDS-Lab\output（客户项目交付成果区）
- **通用工具位置**：S:\YDS-Lab\utils（通用工具库）

### 技术愿景
- **AI原生架构**：以Trae IDE为核心平台，实现多智能体协同工作
- **分布式协作**：通过Struc/组织架构模拟真实公司运作，提供完整的AI协作环境
- **项目生命周期管理**：从开发（projects/）到交付（output/）的全流程管控
- **标准化开发**：统一的目录结构、命名规范和工作流程
- **智能化运维**：自动化工具链支持环境检查、备份恢复和系统维护

### 架构原则
- **分层设计**：采用AI智能体层、项目管理层、工具支撑层的分层架构
- **模块化**：各部门工作区按功能分类管理，支持独立开发和扩展
- **标准化**：统一的目录结构和数据交换格式
- **可扩展**：支持新增项目类型和功能模块
- **高可用**：完善的错误处理和故障恢复机制

## 目录

### 核心管理规范
1. [目录结构管理规范](#一目录结构管理规范) - 标准目录结构、命名规范、权限管理
2. [开发角色与工具使用规则](#二开发角色与工具使用规则) - 角色定义、协作规范、工具使用
3. [工作流程规范](#三工作流程规范) - 工作准备、开发流程、结束事项
4. [AI协作规范](#四ai协作规范) - 智能体配置、协作模式、任务分配

### 技术开发规范
5. [代码开发规范](#五代码开发规范) - 编程规范、版本控制、质量保证
6. [项目管理规范](#六项目管理规范) - 项目生命周期、交付标准、文档管理
7. [工具脚本规范](#七工具脚本规范) - 核心工具、权限控制、自动化流程
8. [备份与恢复规范](#八备份与恢复规范) - 备份策略、恢复流程、数据安全

## 一、目录结构管理规范

### 1. 标准目录结构

YDS-Lab项目采用标准化的目录结构，各目录职责明确：

```
S:\YDS-Lab\
├── Struc\                    # 公司组织架构与AI协作环境
│   ├── Agents\              # AI智能体配置与管理
│   ├── DevTeam\             # 开发团队工作区
│   ├── GeneralOffice\       # 综合办公室
│   │   ├── Docs\           # 文档管理
│   │   ├── Reports\        # 报告管理
│   │   └── Templates\      # 模板管理
│   ├── Log\                 # 系统日志与运行记录
│   └── ProductionTeam\      # 生产团队工作区
├── projects\                # 项目开发工作区
│   ├── active\             # 活跃项目
│   ├── archived\           # 归档项目
│   └── templates\          # 项目模板
├── output\                  # 客户项目交付成果区
│   ├── deliverables\       # 交付成果
│   ├── reports\            # 项目报告
│   └── presentations\      # 演示文稿
├── tools\                   # 自动化工具集
│   ├── check\              # 检查工具
│   ├── config\             # 配置管理
│   ├── mcp\                # MCP服务器工具
│   └── scripts\            # 脚本工具
├── utils\                   # 通用工具库
├── Training\                # 训练数据与模型训练
└── models\                  # AI模型配置与路径映射
```

### 2. 目录命名规范

- **项目目录**：使用英文名称，采用PascalCase或kebab-case
- **文档目录**：中英文结合，便于理解和维护
- **工具脚本**：使用snake_case命名，功能明确
- **配置文件**：统一使用.json或.yaml格式

### 3. 文件权限管理

- **核心工具脚本**：check_structure.py、update_structure.py等设为只读
- **配置文件**：由tools/control.py统一管理权限
- **项目文件**：开发人员具有完整读写权限
- **系统日志**：只读权限，由系统自动维护

## 二、开发角色与工具使用规则

### 1. 角色定义

- **项目负责人**：负责整体架构设计和技术决策
- **AI协作专员**：负责AI Agent的配置和协作流程优化
- **开发工程师**：负责具体功能模块的开发实现
- **测试工程师**：负责系统测试和质量保证
- **运维工程师**：负责系统部署和运维管理

### 2. AI协作规范

- **智能体配置**：统一在01-struc/Agents/目录下管理AI Agent配置
- **协作流程**：遵循"一个人+一群AI"的协作模式
- **任务分配**：根据AI Agent专长进行合理的任务分工
- **结果验证**：AI生成的代码和文档需要人工审核确认

### 3. 工具使用要求

| 工具类别 | 工具名称 | 功能用途 |
|---------|---------|---------|
| 结构管理 | check_structure.py | 项目结构合规性检查 |
| 结构管理 | update_structure.py | 目录结构清单生成 |
| 启动检查 | start.py | 系统启动检查与环境验证 |
| 权限控制 | control.py | 文件权限统一管理 |
| AI协作 | Trae IDE | 多智能体协作平台 |

## 三、工作流程规范

### 1. 工作准备流程

#### （1）明确任务目标
- 仔细研读项目需求文档，理解系统核心功能
- 结合当前任务看板，精准把握开发目标和交付成果

#### （2）规划技术路径
- 参考技术路线文档，了解AI Agent集成的技术方案
- 基于Trae IDE架构，制定详细的实施方案与步骤

#### （3）检查开发环境
- 运行tools/start.py进行系统启动检查
- 确认Python环境、依赖包、工具脚本等配置正确
- 验证AI Agent与系统的连接状态

#### （4）同步最新代码
- 从代码仓库拉取最新代码
- 确保开发基于最新版本进行

#### （5）回顾相关文档
- 查阅设计文档、API文档、模块说明等
- 充分了解项目背景与技术细节

### 2. 开发过程规范

#### （1）代码开发
- 遵循Python PEP 8编码规范
- 按照YDS-Lab标准目录结构组织代码
- 关键功能必须有详细的中文注释

#### （2）版本控制
- 使用Git进行版本管理
- 遵循GitFlow工作流
- 提交信息清晰明确

#### （3）质量保证
- 完善的异常处理和日志记录
- 定期运行代码质量检查工具
- 执行单元测试和集成测试

### 3. 工作结束事项

#### （1）代码质量检查
- 运行代码质量检查工具
- 记录检查结果并及时修复问题

#### （2）自动化测试
- 执行单元测试和集成测试
- 确保测试覆盖率满足要求

#### （3）功能自测
- 对完成功能进行基本自测
- 对照需求验证功能正确性

#### （4）代码提交
- 将完成的代码提交到Git仓库
- 编写清晰的提交说明

#### （5）文档更新
- 更新开发日志、技术文档等
- 确保文档与代码实现同步

#### （6）结构检查
- 运行check_structure.py检查项目结构
- 处理检查报告中的违规项

## 四、AI协作规范

### 1. 智能体管理

#### （1）配置管理
- AI Agent配置统一存放在01-struc/Agents/目录
- 配置文件使用标准JSON或YAML格式
- 定期备份和版本控制配置文件

#### （2）协作模式
- 实现"一个人+一群AI"的高效协作
- 明确各AI Agent的专业领域和职责
- 建立AI Agent之间的协作机制

#### （3）任务分配
- 根据AI Agent专长进行任务分工
- 建立任务优先级和依赖关系
- 实时监控任务执行状态

### 2. 质量控制

#### （1）结果验证
- AI生成的代码需要人工审核
- 建立代码质量检查标准
- 实施多层次的质量保证机制

#### （2）持续改进
- 收集AI协作过程中的反馈
- 优化AI Agent配置和协作流程
- 定期评估协作效果

## 五、代码开发规范

### 1. 编程规范

#### （1）Python开发规范
- 严格遵循PEP 8编码规范
- 使用类型提示提高代码可读性
- 合理使用文档字符串

#### （2）项目结构规范
- 按照YDS-Lab标准目录结构组织代码
- 模块化设计，职责单一
- 合理的包和模块划分

#### （3）注释规范
- 关键功能必须有详细的中文注释
- 复杂算法需要说明实现思路
- API接口需要完整的文档说明

### 2. 版本控制规范

#### （1）Git工作流
- 使用GitFlow分支管理策略
- 主分支保持稳定可发布状态
- 功能开发使用独立分支

#### （2）提交规范
- 提交信息格式：[类型] 简短描述
- 类型包括：feat、fix、docs、style、refactor、test等
- 提交内容原子化，一次提交解决一个问题

### 3. 质量保证

#### （1）代码检查
- 使用flake8进行代码风格检查
- 使用pylint进行代码质量分析
- 定期进行代码审查

#### （2）测试规范
- 单元测试覆盖率不低于80%
- 关键功能必须有集成测试
- 使用pytest作为测试框架

## 六、项目管理规范

### 1. 项目生命周期管理

#### （1）项目启动
- 在projects/active/目录创建项目文件夹
- 使用项目模板初始化项目结构
- 配置项目相关的AI Agent

#### （2）项目开发
- 遵循标准的开发流程
- 定期更新项目状态和进度
- 及时处理项目风险和问题

#### （3）项目交付
- 将交付成果放入output/目录
- 生成项目报告和文档
- 项目归档到projects/archived/目录

### 2. 文档管理

#### （1）文档分类
- 设计文档：存放在01-struc/docs/
- 技术文档：与代码同目录管理
- 用户文档：存放在output/目录

#### （2）文档标准
- 使用Markdown格式编写文档
- 文档结构清晰，内容完整
- 定期更新和维护文档

## 七、工具脚本规范

### 1. 核心工具管理

#### （1）结构检查工具
- check_structure.py：项目结构合规性检查
- 定期运行，确保项目结构符合标准
- 生成详细的检查报告

#### （2）结构更新工具
- update_structure.py：目录结构清单生成
- 在项目结构变更后及时更新
- 保持清单与实际结构同步

#### （3）启动检查工具
- start.py：系统启动检查与环境验证
- 检查Python环境、依赖包、工具状态
- 生成系统状态报告

### 2. 权限控制

#### （1）权限管理工具
- control.py：统一的文件权限管理
- 核心文件设置为只读保护
- 提供权限变更的审批流程

#### （2）权限控制原则
- 最小权限原则
- 审批记录完整
- 责任追溯明确

### 3. 自动化流程

#### （1）自动化检查
- 定期执行结构检查
- 自动生成检查报告
- 及时发现和处理问题

#### （2）自动化部署
- 使用脚本进行环境配置
- 自动化的测试和部署流程
- 减少人工操作错误

## 八、备份与恢复规范

### 1. 备份策略

#### （1）备份范围
- 项目代码：完整备份
- 配置文件：完整备份
- 文档资料：完整备份
- 系统日志：定期清理和归档

#### （2）备份频率
- 代码变更：实时备份到Git仓库
- 配置变更：立即备份
- 定期备份：每日全量备份

#### （3）备份存储
- 本地备份：使用专门的备份目录
- 远程备份：推送到Git仓库
- 云端备份：定期同步到云存储

### 2. 恢复流程

#### （1）故障识别
- 快速识别故障类型和影响范围
- 评估恢复的紧急程度
- 制定恢复计划

#### （2）恢复操作
- 从最近的备份恢复数据
- 验证恢复结果的完整性
- 测试系统功能正常性

#### （3）故障总结
- 分析故障原因
- 改进备份和恢复流程
- 更新应急预案

## 附录

### A. 常用命令参考

```bash
# 结构检查
python tools/check_structure.py

# 结构更新
python tools/update_structure.py

# 启动检查
python tools/start.py

# 权限管理
python tools/control.py
```

### B. 目录结构快速参考

```
YDS-Lab/
├── Struc\          # 组织架构
├── projects\       # 项目开发
├── output\         # 交付成果
├── tools\          # 工具集
├── utils\          # 工具库
├── Training\       # 训练数据
└── models\         # AI模型
```

## 七、目录文件及清单管理规定

### 1. 特殊目录管理

#### 1.1 日志目录管理
- **Struc\Log 目录**：用于存放系统日志文件，包含以下子目录：
  - `agent_collaboration\`：AI Agent协作日志
  - `audit_trails\`：审计跟踪日志
  - `git\`：Git操作日志
  - `performance_metrics\`：性能指标日志
  - `startup_records\`：启动记录日志
  - `system_events\`：系统事件日志
- **处理规则**：日志内容不包含在目录结构标准清单中，不推送到Git仓库，仅在全量备份时备份

#### 1.2 输出目录管理
- **output\ 目录**：存放项目交付成果和输出结果
  - 推送到Git仓库进行版本管理
  - 包含各项目编号目录（如 001-dewatermark-ai、002-meetingroom-system等）
  - 每个项目目录包含assets、versions等子目录

#### 1.3 项目目录管理
- **projects\ 目录**：存放项目开发代码
  - 完整推送到Git仓库
  - 包含项目模板（templates\）和具体项目实现

#### 1.4 虚拟环境目录
- **.venv 目录**：Python虚拟环境
  - 已纳入`.gitignore`忽略列表
  - 不推送到Git仓库
  - 在目录结构扫描中自动排除

### 2. 目录结构更新工具

#### 2.1 update_structure.py 使用规范
- **功能**：扫描YDS-Lab项目目录结构，生成标准化目录清单
- **输出文件**：
  - 候选清单：`《动态目录结构清单（候选）》.md`
  - 正式清单：`《动态目录结构清单》.md`
- **自动排除规则**：
  - 版本控制目录：`.git`、`.vscode`、`.idea`
  - Python缓存：`__pycache__`、`*.pyc`、`*.pyo`
  - 虚拟环境：`.venv`、`venv`、`env`
  - 临时文件：`*.tmp`、`*.temp`、`*.bak`、`*.swp`
  - 系统文件：`.DS_Store`、`Thumbs.db`、`desktop.ini`
  - 备份目录：`bak`、`backup`、`backups`、`Backup`、`Backups`

#### 2.2 特殊目录处理规则
- **Log目录**：最大深度2层，不显示具体文件
- **归档目录**：最大深度1层，不显示具体文件

#### 2.3 红线规定
- **权限控制**：只能更新项目架构设计文档，禁止在未经批准的情况下运行update_structure.py来更新目录结构标准清单
- **审批流程**：任何对目录结构标准清单的更新都必须经过项目负责人的明确授权
- **候选机制**：默认生成候选清单，需要审批后才能发布为正式清单

### 3. 备份和版本管理范围

#### 3.1 Git仓库管理内容
- **完整推送**：
  - `Struc\`：组织架构（除Log目录外）
  - `projects\`：项目代码（完整内容）
  - `tools\`：开发工具（完整内容）
  - `output\`：交付成果（完整内容）
  - `utils\`：工具库（完整内容）
  - `Training\`：训练数据（完整内容）

#### 3.2 本地备份内容
- **全量备份**：包含所有目录和文件
- **增量备份**：仅备份变更内容
- **日志备份**：定期备份Log目录内容

#### 3.3 排除内容
- **完全排除**：
  - `.git`：Git版本控制目录
  - `.venv`、`venv`、`env`：虚拟环境目录
  - `__pycache__`：Python缓存目录
  - `*.pyc`、`*.pyo`、`*.pyd`：Python编译缓存文件
  - `*.log`、`*.tmp`、`*.temp`：临时和日志文件
  - `.DS_Store`、`Thumbs.db`：系统文件

- **结构保留，内容排除**：
  - `Struc\Log\`：保留目录结构，排除具体日志文件
  - 隐藏目录（以"."开头）：仅显示目录本身，不扫描内容

### 4. 配置文件管理

#### 4.1 结构配置
- **配置文件**：`tools\structure_config.yaml`
- **功能**：定义目录扫描规则、排除模式、特殊处理规则
- **维护**：由开发团队统一维护，变更需要版本控制

#### 4.2 安全配置
- **权限配置**：`Struc\Security\permission.yaml`
- **加密配置**：`Struc\Security\encryption.yaml`
- **安全策略**：`Struc\Security\security_config.yaml`

### C. 联系方式

如有问题或建议，请联系：
- 项目负责人：技术团队
- 文档维护：综合办公室
- 技术支持：开发团队

---

**文档版本**: v2.1  
**最后更新**: 2025年11月2日  
**下次审查**: 2025年3月