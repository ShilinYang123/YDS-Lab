# YDS AI 公司模型部署与调试方案  
**文档编号**：YDS-AI-TECH-003  
**版本**：1.0  
**归档路径**：`Struc/GeneralOffice/Docs/YDS-AI-技术文档/`  
**最后更新**：2025年10月18日  
**作者**：YDS AI 技术委员会（由开发总监、架构师、编码工程师、测试工程师协同生成）

---

## 一、目标

为 **DeWatermark AI 视频去水印项目** 制定一套**低成本、高可用、可扩展**的模型部署与调试方案，充分利用现有三台设备资源，实现本地与云端混合推理架构。

---

## 二、硬件资源分析

| 设备 | 配置 | 适用角色 | 推理能力 |
|------|------|----------|----------|
| **笔记本（华硕 GL552VW）** | i7-4720HQ / 24GB RAM / GTX 960M (2GB) | 主开发机 + Agent 调度中心 | ❌ 不适合模型推理（显存不足） |
| **江门台式机** | i5-10400F / 16GB RAM / GTX 1050 Ti (4GB) | GPU 加速备选 | ✅ 轻量 CUDA 模型（≤4GB 显存） |
| **贵阳台式机** | i7-3770 / 32GB RAM / Radeon R7 200 (1GB, 无 CUDA) | **本地推理主力机** | ✅ ONNX CPU 推理（大内存优势） |

> 💡 **结论**：贵阳机为本地推理核心，江门机为 GPU 备份，笔记本专注调度与开发。

---

## 三、模型选型与部署策略

### 3.1 核心模型清单

| 模型 | 用途 | 格式 | 部署位置 | 推理方式 |
|------|------|------|----------|----------|
| **Shimmy** | 视频去水印主模型 | ONNX | 贵阳台式机 | CPU |
| **LaMa** | 图像修复后处理 | ONNX | 贵阳台式机 | CPU |
| **DeepSeek-Coder-1.3B** | 代码生成（开发部内部） | GGUF / ONNX | 贵阳台式机 | CPU |
| **LaMa-256px** | 轻量去水印（GPU 备用） | PyTorch | 江门台式机 | CUDA |
| **Qwen-VL / 百炼视觉大模型** | 云加速服务 | API | 阿里云 | HTTP |

---

### 3.2 部署架构图

```mermaid
graph LR
    A[Tauri App] -->|用户选择模式| B{处理模式}
    B -->|本地| C[贵阳台式机<br>ONNX CPU 推理<br>Shimmy + LaMa]
    B -->|云端| D[阿里云百炼 API<br>Qwen-VL 视觉大模型]
    C --> E[FFmpeg 合成]
    D --> E
    E --> F[输出无水印视频]