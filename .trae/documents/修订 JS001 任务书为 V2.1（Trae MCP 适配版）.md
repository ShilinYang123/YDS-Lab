# JS001â€”æ™ºèƒ½ä¼šè®®å®¤ç³»ç»Ÿå¼€å‘ä»»åŠ¡ä¹¦ï¼ˆV2.1ï½œTrae MCP é€‚é…ç‰ˆï¼‰ä¿®è®¢æ–¹æ¡ˆ

## ä¿®è®¢ç›®æ ‡

* ç»Ÿä¸€ä¸ºâ€œV2.1ï¼ˆTrae MCP é€‚é…ç‰ˆï¼‰â€ï¼Œæ•´åˆç°æœ‰ V1.0ã€V1.1ã€V2.0 ä¸â€œå®æ—¶æ¨¡å¼å¢è¡¥â€ã€‚

* ä¸ã€Šå…¬å¸ç®€ä»‹ã€‹ã€Šå…¬å¸å»ºè®¾å®æ–½æ–¹æ¡ˆã€‹ã€Šæ ‡å‡†ç›®å½•ç»“æ„ï¼ˆV5.1ï¼‰ã€‹å…¨é¢å¯¹é½ï¼Œè¡¥é½ MCP æ¥å£ã€ç»Ÿä¸€æ¶ˆæ¯æ¨¡å‹ã€æƒé™ä¸å®¡è®¡ã€æ–‡æ¡£å…±äº«æ²»ç†ã€è¯­éŸ³æœåŠ¡ä¸å¥åº·æ£€æŸ¥ã€æ²»ç†æ€§æµ‹è¯•ã€KPI æŒ‡æ ‡ã€‚

* æœ¯è¯­ç»Ÿä¸€ä¸ºå…¬å¸æ ‡å‡†ï¼šæ™ºèƒ½ä½“ã€è™šæ‹Ÿä¼šè®®å®¤ã€è®®ç¨‹ã€æ„è§è¡¨è¾¾ã€åˆ†æ­§å¤„ç†ã€æŠ•ç¥¨ã€çºªè¦ã€å†³ç­–è¿½æº¯ã€‚

## æ–‡æ¡£ç»“æ„ï¼ˆV2.1 ç›®å½•ï¼‰

1. æ–‡æ¡£å…ƒæ•°æ®ä¸ç‰ˆæœ¬å£°æ˜ï¼ˆV2.1ã€æœ€åæ›´æ–°ã€é€‚é…å¹³å°ï¼šTraeï¼‰
2. é¡¹ç›®æ¦‚è¿°ä¸æˆ˜ç•¥ä¸€è‡´æ€§ï¼ˆæ˜ å°„å…¬å¸ç®€ä»‹çš„æ²»ç†ç†å¿µä¸äº”è¡Œæ¶æ„ï¼‰
3. éœ€æ±‚èŒƒå›´

   * åŠŸèƒ½éœ€æ±‚ï¼šä¼šè®®é¢„çº¦/åˆ†çº§ï¼ˆA/B/Cï¼‰/è®®ç¨‹/æ–‡æœ¬èŠå¤©/æŠ•ç¥¨/æ–‡æ¡£å…±äº«/çºªè¦/ä»»åŠ¡æå–

   * éåŠŸèƒ½ï¼šæ€§èƒ½ã€ç¨³å®šæ€§ã€å®‰å…¨ä¸åˆè§„ã€å…¼å®¹æ€§
4. æŠ€æœ¯æ¶æ„ä¸ Trae MCP é€‚é…

   * ç»Ÿä¸€æ¶ˆæ¯æ¨¡å‹ï¼ˆJSON å­—æ®µã€channelã€event\_typeã€topicã€payload æŒ‰é€šé“ï¼‰

   * ç«¯ç‚¹ä¸è·¯ç”±ï¼š`WebSocket /ws?token=...`ã€`/mcp/messages|docs|votes|voice` æ§åˆ¶é¢ï¼›Topicï¼š`rooms/{room_id}/{channel}/{event_type}`

   * æµå¼è¾“å‡ºï¼šWS ä¸ºä¸»ã€SSE ä¸ºè½»é‡é™çº§ï¼›ä¸ç°æœ‰ `/api/rtm/*` çš„å…³ç³»ä¸è¿ç§»è·¯å¾„

   * å‰åç«¯é›†æˆï¼š`socketio.emit` å°è£…ç»Ÿä¸€æ¶ˆæ¯ï¼›UI ç»„ä»¶å¯¹æ¥æ–‡æœ¬/è¯­éŸ³/æ–‡æ¡£/æŠ•ç¥¨
5. æƒé™ä¸å®¡è®¡ï¼ˆMVPï¼‰

   * èº«ä»½è®¤è¯ï¼šJWTï¼ˆWS æ¡æ‰‹ä¸ REST å…±ç”¨ï¼‰

   * RBAC è§’è‰²ï¼šCEOã€ä¼šè®®ç§˜ä¹¦ã€è´¢åŠ¡æ€»ç›‘ã€æŠ€æœ¯ä»£è¡¨ã€è§‚å¯Ÿå‘˜

   * èµ„æºçº§ ACLï¼šç™½åå•/é»‘åå•ï¼›åˆåŒåŸä»¶ç¦æ­¢å…±äº«ï¼›åªè¯»å¼•ç”¨ç­–ç•¥

   * å®¡è®¡ç•™ç—•ï¼šæ“ä½œè€…/æ—¶é—´/èµ„æºè·¯å¾„/æ ¡éªŒç»“æœï¼›è¾“å‡ºè‡³ `s:\YDS-Lab\01-struc\logs\audit_trails`ï¼›ç•™å­˜ä¸å‹ç¼©ç­–ç•¥
6. æ–‡æ¡£å…±äº«æ²»ç†ä¸ç›®å½•ç™½åå•

   * å…è®¸ç›®å½•ï¼š`SharedWorkspace/Documents/MeetingAttachments/**`ã€`SharedWorkspace/Collaboration/**`ã€`04-prod/.../assets/**`ã€`companydocs/YDS-AI-æˆ˜ç•¥è§„åˆ’/*.md`ï¼ˆåªè¯»ï¼‰

   * ç¦æ­¢ï¼š`companydocs/**/åˆåŒ/**` åŠåŒ…å«â€œåˆåŒ/å¯¹å¤–æ–‡æ¡£â€çš„è·¯å¾„
7. ä¼šè®®æœºåˆ¶ä¸å†³ç­–è¿½æº¯

   * ä¼šè®®åˆ†çº§ï¼ˆA/B/Cï¼‰ï¼šè§¦å‘æ¡ä»¶ã€æ—¶é•¿ã€å†³ç­–æ–¹å¼ä¸é¢‘ç‡

   * æ„è§è¡¨è¾¾ä¸åˆ†æ­§å¤„ç†ï¼šğŸŸ¢ğŸŸ¡ğŸ”´ğŸ”µ åˆ†ç±»ï¼›åˆ†æ­§è¯†åˆ«â†’æ·±åº¦è®¨è®ºâ†’æ•°æ®æ”¯æ’‘â†’ç¬¬ä¸‰æ–¹æ„è§â†’æŠ•ç¥¨â†’å†³ç­–è®°å½•

   * å†³ç­–è¿½æº¯ç»“æ„ï¼š`decision_id/meeting_info/decision_content/discussion_process/action_items`
8. è¯­éŸ³æœåŠ¡éƒ¨ç½²ä¸å¥åº·æ£€æŸ¥

   * `SHIMMY_HOME` ä¸ç«¯å£ï¼šShimmy `51080`ã€Ollama `11434`

   * external\_models.json æ˜ å°„ï¼ˆSTT/TTS/LLM é»˜è®¤ä¸ providersï¼‰

   * å¥åº·æ£€æŸ¥ï¼š`http://127.0.0.1:11434/api/tags`ã€`http://127.0.0.1:51080/health`

   * è¯­éŸ³é“¾è·¯å‚æ•°ï¼šåˆ†ç‰‡å¤§å°ã€é‡‡æ ·ç‡ã€å¼±ç½‘é‡ä¼ ä¸åˆ†ç‰‡æ ¡éªŒï¼Œäº‘/æœ¬åœ°å›é€€ç­–ç•¥
9. å®æ–½è®¡åˆ’ä¸é‡Œç¨‹ç¢‘ï¼ˆV5.1 å¯¹é½ï¼‰

   * ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ­å»ºä¸ MCP é€‚é…

   * ç¬¬äºŒé˜¶æ®µï¼šè¯•ç‚¹éªŒè¯ï¼ˆæ²»ç†é¡¹å…¥éªŒæ”¶ï¼‰

   * ç¬¬ä¸‰é˜¶æ®µï¼šè§„æ¨¡è¿è¥ï¼ˆæ¨¡æ¿æ²‰æ·€ã€å®¢æˆ·æ»¡æ„åº¦ç›‘æ§ï¼‰

   * ç¬¬å››é˜¶æ®µï¼šä¼˜åŒ–å‡çº§ï¼ˆæ•ˆç‡ä¸ç›ˆåˆ©èƒ½åŠ›æå‡ï¼‰
10. æµ‹è¯•ä¸éªŒæ”¶æ¸…å•ï¼ˆæ²»ç†é©±åŠ¨ï¼‰

* æƒé™æ‹’ç»ä¸ç™½/é»‘åå•

* æŠ•ç¥¨é—­ç¯ï¼ˆåˆ›å»ºâ†’æŠ•ç¥¨â†’è®¡ç¥¨â†’å¹¿æ’­â†’çºªè¦å…¥åº“ï¼Œå«åŒ¿åä¸æ³•å®šäººæ•°ï¼‰

* æ–‡æ¡£å…±äº«ä¸€è‡´æ€§ä¸æ’¤å›å®¡è®¡

* è¯­éŸ³é“¾è·¯ç«¯åˆ°ç«¯ï¼ˆå¼±ç½‘é‡ä¼ ã€è½¬å†™è´¨é‡ï¼›æœ¬åœ°ä¸äº‘ç«¯åˆ‡æ¢ï¼‰

* ä¼šè®®çºªè¦è´¨é‡ï¼ˆæ–‡æœ¬æ±‡æ€»ã€è¡ŒåŠ¨é¡¹ã€å†³ç­–è®°å½•ä¸å…³é”®äº‹ä»¶ç´¢å¼•ï¼‰

1. KPI ä¸è¯„ä¼°æŒ‡æ ‡

* æ•ˆç‡/è´¨é‡/åä½œ/å­¦ä¹ æŒ‡æ ‡ä¸ç›®æ ‡å€¼ï¼Œæ˜ å°„åˆ°éªŒæ”¶é—¨æ§›

1. ç‰ˆæœ¬å˜æ›´è®°å½•

* æ”¶æ•› V1.0/V1.1/V2.0 ä¸ºæ¡ç›®ï¼›æ–°å¢ V2.1 è¯´æ˜

1. é™„å½•

* æ¥å£é”™è¯¯ç /é‰´æƒå¤±è´¥å¤„ç†

* æœ¯è¯­å¯¹ç…§è¡¨ï¼ˆAgentâ†’æ™ºèƒ½ä½“ç­‰ï¼‰

* å…³é”®é…ç½®æ ·ä¾‹ä¸å‘½ä»¤ï¼ˆPowerShellï¼‰

## å…³é”®å†…å®¹ç¤ºä¾‹ï¼ˆå°†åµŒå…¥ä»»åŠ¡ä¹¦ï¼‰

* ç»Ÿä¸€æ¶ˆæ¯æ¨¡å‹ï¼ˆJSONï¼‰

```json
{
  "id": "msg-2025-11-03-0001",
  "room_id": "room-2025-001",
  "channel": "text | voice | docs | vote",
  "event_type": "message.text | voice.stream | docs.share | vote.cast",
  "topic": "rooms/{room_id}/{channel}/{event_type}",
  "sender": { "id": "agent.ceo", "role": "CEO", "display_name": "æ€»ç»ç†æ™ºèƒ½ä½“" },
  "timestamp": "2025-11-03T09:30:10Z",
  "payload": {
    "text": { "content": "è®¨è®ºè¦ç‚¹â€¦â€¦" },
    "voice": { "session_id": "voice-abc", "chunk_seq": 1, "sample_rate": 16000, "format": "pcm16", "data_base64": "..." },
    "docs": { "action": "share", "path": "s:\\YDS-Lab\\01-struc\\SharedWorkspace\\Documents\\MeetingAttachments\\demo.pdf", "name": "demo.pdf", "type": "pdf", "size": 12345, "hash": "sha256:...", "permissions": "read" },
    "vote": { "proposal_id": "vote-001", "options": ["A", "B"], "selected": "A", "anonymous": false, "weight": 1, "quorum": 0.6, "expires_at": "2025-11-03T10:00:00Z" }
  }
}
```

* ç«¯ç‚¹ä¸è·¯ç”±

```
WebSocket: /ws?token=...
  äº‹ä»¶: message.text | voice.stream | docs.share | vote.cast | system.notice
  Topic: rooms/{room_id}/{channel}/{event_type}
REST æ§åˆ¶é¢:
  POST /mcp/messages/send
  POST /mcp/docs/share | GET /mcp/docs/list
  POST /mcp/votes/create | POST /mcp/votes/cast | GET /mcp/votes/status
  POST /mcp/voice/session/start | POST /mcp/voice/chunk
```

* RBAC ä¸ ACLï¼ˆç¤ºä¾‹ï¼‰

```yaml
rbac:
  roles: [CEO, MeetingSecretary, FinanceDirector, TechRepresentative, Observer]
acl:
  resources:
    - name: meeting_attachments
      paths: ["s:\\YDS-Lab\\01-struc\\SharedWorkspace\\Documents\\MeetingAttachments\\**"]
      permissions: [read, write, share]
      roles: [CEO, MeetingSecretary]
    - name: collaboration_docs
      paths: ["s:\\YDS-Lab\\01-struc\\SharedWorkspace\\Collaboration\\**"]
      permissions: [read, write]
      roles: [CEO, MeetingSecretary, TechRepresentative]
    - name: strategic_docs_readonly
      paths: ["s:\\YDS-Lab\\01-struc\\companydocs\\YDS-AI-æˆ˜ç•¥è§„åˆ’\\*.md"]
      permissions: [read]
      roles: [CEO, MeetingSecretary, FinanceDirector, TechRepresentative, Observer]
    - name: contracts_forbidden
      paths: ["s:\\YDS-Lab\\01-struc\\companydocs\\**\\åˆåŒ\\**"]
      permissions: []
      roles: [CEO, MeetingSecretary, FinanceDirector, TechRepresentative, Observer]
audit:
  output: "s:\\YDS-Lab\\01-struc\\logs\\audit_trails"
  retain_days: 180
```

* è¯­éŸ³æœåŠ¡é…ç½®ä¸å¥åº·æ£€æŸ¥

```json
{
  "stt": {
    "default": "shimmy.whisper-tiny-zh",
    "providers": {"shimmy": {"host": "http://127.0.0.1:51080", "models": ["whisper-tiny-zh", "whisper-small-zh"]}}
  },
  "tts": {
    "default": "shimmy.onnx-zh",
    "providers": {"shimmy": {"host": "http://127.0.0.1:51080", "voices": ["zh_female", "zh_male"]}}
  },
  "llm": {
    "default": "ollama.qwen2.5",
    "providers": {"ollama": {"host": "http://127.0.0.1:11434", "models": ["qwen2.5:latest", "llama3.1:8b"]}}
  }
}
```

```
Invoke-WebRequest http://127.0.0.1:11434/api/tags
Invoke-WebRequest http://127.0.0.1:51080/health
```

* æµ‹è¯•ä¸éªŒæ”¶æ¸…å•ï¼ˆèŠ‚é€‰ï¼‰

```
1) æƒé™/ç™½é»‘åå•ï¼šå…±äº« companydocs/åˆåŒ åŸä»¶åº”æ‹’ç»ï¼›MeetingAttachments é€šè¿‡å¹¶ç•™ç—•
2) æŠ•ç¥¨é—­ç¯ï¼šåˆ›å»ºâ†’æŠ•ç¥¨â†’è®¡ç¥¨â†’ç»“æœå¹¿æ’­â†’çºªè¦å…¥åº“ï¼›æ ¡éªŒ quorum ä¸åŒ¿å
3) å¹¶å‘å…±äº«ä¸€è‡´æ€§ï¼šæ¶ˆæ¯ä¸ UI çŠ¶æ€ä¸€è‡´ï¼›æ’¤å›ç”Ÿæ•ˆå¹¶å¯å®¡è®¡
4) è¯­éŸ³é“¾è·¯ï¼šå¼±ç½‘é‡ä¼ ã€STT è½¬å†™è´¨é‡ï¼›äº‘ç«¯ä¸å¯ç”¨å›é€€è‡³æœ¬åœ°
5) çºªè¦è´¨é‡ï¼šæ–‡æœ¬æ±‡æ€»ã€è¡ŒåŠ¨é¡¹ã€å†³ç­–è®°å½•å®Œæ•´ï¼›å…³é”®äº‹ä»¶å¯å›æ”¾
```

## ä¿®è®¢æ­¥éª¤

* æ”¶æ•›æ–‡æ¡£ç‰ˆæœ¬ï¼šä»¥ V2.1 ä¸ºä¸»ï¼Œæ•´åˆ V1.0/V1.1/V2.0 ä¸å®æ—¶å¢è¡¥ä¸ºâ€œå˜æ›´è®°å½•+é™„å½•â€ï¼Œä¿ç•™æœ‰æ•ˆå†…å®¹ï¼Œç»Ÿä¸€æœ¯è¯­ã€‚

* æ–°å¢ä¸æ›¿æ¢ç« èŠ‚ï¼šç¬¬ 4/5/6/7/8/10/11/12 ç« æŒ‰ä¸Šè¿°ç›®å½•è¡¥å……ä¸æ”¹å†™ï¼›å°†ç°æœ‰ `/api/rtm/*` æè¿°æ ‡æ³¨ä¸ºâ€œè½»é‡å®æ—¶é€šé“ï¼ˆSSEï¼‰â€ï¼Œå¹¶ç»™å‡ºä¸ WS ä¸»é“¾è·¯çš„è¿ç§»è¯´æ˜ã€‚

* å¯¹é½è·¯å¾„ä¸é…ç½®ï¼šæ˜¾å¼å£°æ˜ç™½åå•ä¸å®¡è®¡è·¯å¾„ï¼›è¡¥å…… external\_models æ˜ å°„ä¸å¥åº·æ£€æŸ¥å‘½ä»¤ã€‚

* è´¨é‡é—¨æ§›ç»‘å®š KPIï¼šåœ¨éªŒæ”¶æ ‡å‡†ä¸­å¼•å…¥ KPI ç›®æ ‡å€¼ä½œä¸ºé€šè¿‡é˜ˆå€¼ã€‚

## äº¤ä»˜ç‰©

* ä¿®è®¢åçš„ä»»åŠ¡ä¹¦ï¼š`JS001-æ™ºèƒ½ä¼šè®®å®¤ç³»ç»Ÿå¼€å‘ä»»åŠ¡ä¹¦ï¼ˆV2.1-Trae MCPé€‚é…ç‰ˆï¼‰.md`

* é™„å½•ä¸é…ç½®ç¤ºä¾‹ï¼šç»Ÿä¸€æ¶ˆæ¯æ¨¡å‹ã€RBAC/ACL æ¨¡ç‰ˆã€external\_models.json ç‰‡æ®µã€å¥åº·æ£€æŸ¥å‘½ä»¤é›†ã€‚

* é—®é¢˜ä¸æ”¹åŠ¨å¯¹ç…§è¡¨ï¼šåˆ—å‡ºåŸæ–‡å·®è·ä¸å¯¹åº”ä¿®è®¢é¡¹ã€‚

## éªŒæ”¶ä¸è¯„çº§ç›®æ ‡

* æ–‡æ¡£çº§éªŒæ”¶ï¼šå®Œæ•´æ€§/ä¸€è‡´æ€§/è§„èŒƒæ€§è¾¾åˆ°ã€Šå®Œæ•´æ–¹æ¡ˆã€‹è¦æ±‚ï¼›æ²»ç†æ€§æµ‹è¯•æ¡ç›®é½å¤‡ã€‚

* ç›®æ ‡è¯„çº§ï¼šä»â€œåˆæ ¼â€æå‡è‡³â€œä¼˜ç§€â€ã€‚

## å®æ–½æ—¶é•¿ä¸é¡ºåº

* é¢„è®¡ 1 å·¥ä½œæ—¥å®Œæˆä¿®è®¢ä¸æ ¡å¯¹ã€‚

* é¡ºåºï¼šç‰ˆæœ¬æ”¶æ•›â†’æœ¯è¯­ç»Ÿä¸€â†’MCP é€‚é…ç« èŠ‚â†’æƒé™ä¸æ²»ç†â†’è¯­éŸ³ä¸å¥åº·æ£€æŸ¥â†’æµ‹è¯•æ¸…å•ä¸ KPI

